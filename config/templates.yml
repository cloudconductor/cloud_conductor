aws:
  name: "{{target `name`}}"
  type: "amazon-ebs"
  access_key: "{{cloud `key`}}"
  secret_key: "{{cloud `secret`}}"
  region: "{{cloud `entry_point`}}"
  instance_type: "c3.large"
  ssh_username: "{{target `ssh_username`}}"
  source_ami: "{{target `source_image`}}"
  ami_name: "{{operating_system `name`}}-{{user `image_name`}}-{{uuid}}"
  tags: {
    Name: "{{operating_system `name`}}-{{user `image_name`}}"
  }
  launch_block_device_mappings:
    - device_name: "/dev/sda1"
      delete_on_termination: true

openstack:
  name: "{{target `name`}}"
  type: "openstack"
  username: "{{cloud `key`}}"
  password: "{{cloud `secret`}}"
  project: "{{cloud `tenant_name`}}"
  provider: "{{cloud `entry_point`}}v2.0/tokens"
  region: "RegionOne"
  flavor: "2"
  source_image: "{{target `source_image`}}"
  image_name: "{{operating_system `name`}}-{{user `image_name`}}-{{uuid}}"
  ssh_username: "{{target `ssh_username`}}"
  use_floating_ip: "true"
  floating_ip_pool: "public"
