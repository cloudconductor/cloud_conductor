{
  "variables": {
    "cloudconductor_root": null,
    "cloudconductor_init_url": null,
    "cloudconductor_init_revision": null,
    "platform_pattern_name": null,
    "repository_url": null,
    "revision": null,
    "role": null,
    "image_name": null
  },
  "builders": [
  ],
  "provisioners": [
    {
      "type": "shell",
      "inline_shebang": "/bin/bash -x",
      "inline": [
        "sudo git clone {{user `cloudconductor_init_url`}} {{user `cloudconductor_root`}}",

        "cd {{user `cloudconductor_root`}}",
        "sudo git checkout {{user `cloudconductor_init_revision`}}",

        "if [ -f ./bin/init.sh ]; then",
        "  sudo SERF_TAG_ROLE={{user `role`}} PLATFORM_PATTERN_NAME={{user `platform_pattern_name`}} PLATFORM_PATTERN_URL={{user `repository_url`}} PLATFORM_PATTERN_REVISION={{user `revision`}} ./bin/init.sh",
        "fi",

        "sync"
      ]
    }
  ]
}
